// Test file for local member access validation

class Counter {
    local let count: u32 = 0
    local let secret: string = "hidden"
    let public: u32 = 42
    
    local fn increment() {
        this.count = this.count + 1
    }
    
    local fn getSecret() -> string {
        return this.secret
    }
    
    fn tick() {
        // ✅ OK - accessing local members within the same class
        this.increment()
        let s = this.getSecret()
    }
    
    fn getCount() -> u32 {
        // ✅ OK - accessing local attribute within class
        return this.count
    }
    
    fn getPublic() -> u32 {
        // ✅ OK - accessing public attribute
        return this.public
    }
}

fn main() {
    let c = new Counter()
    
    // ✅ OK - accessing public attribute
    let p = c.public
    
    // ✅ OK - calling public method
    let count = c.getCount()
    
    // ❌ Error - accessing local attribute outside class
    let secret = c.count
    
    // ❌ Error - accessing local attribute outside class
    let s = c.secret
    
    // ❌ Error - calling local method outside class
    c.increment()
    
    // ❌ Error - calling local method outside class
    let gs = c.getSecret()
}

class SubCounter {
    let counter: Counter = new Counter()
    
    fn useCounter() {
        // ❌ Error - cannot access local members even through composition
        let x = this.counter.count
        this.counter.increment()
    }
}