// Test coroutine instance types

// ✅ Creating a coroutine instance from a coroutine function
cfn loop(x: u32[]) -> u32 {
    yield x[0]
    yield x[1]
}

fn main() {
    // co has type: coroutine<fn(x: u32[]) -> u32>
    let co = coroutine loop
    
    // Calling the coroutine instance multiple times
    let x = co([1u32, 2u32, 3u32])  // yields u32
    let y = co([4u32, 5u32, 6u32])  // yields u32
    let z = co([7u32, 8u32, 9u32])  // yields u32
}

// ✅ Coroutine instance with different parameter types
cfn stringGen(prefix: string, count: u32) -> string {
    yield prefix
}

fn testStrings() {
    /// @Type(co): coroutine<fn(prefix: string, count: u32) -> string>
    let co = coroutine stringGen
    let a = co("hello", 5u32)
    let b = co("world", 10u32)
}

// ✅ Coroutine instance from lambda
fn testLambdaCoroutine() {
    /// @Type(co): coroutine<fn(n: u32) -> u32>
    let co = coroutine cfn(n: u32) -> u32 {
        yield n
        yield n + 1u32
    }
    
    let x = co(10u32)
}